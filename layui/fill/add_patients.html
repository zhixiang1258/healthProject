<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" href="../js/layui/css/layui.css"  media="all">
	<link rel="stylesheet" href="../css/re_layui.css"  media="all">
	<link rel="stylesheet" href="../css/coment.css"  media="all">
	<link rel="stylesheet" href="../css/style.css"  media="all">
	<link rel="stylesheet" type="text/css" href="../select2/css/select2.min.css">
	<link rel="stylesheet" type="text/css" href="../select2/js/select2.full.min.js">
</head>
<body>
	<div class="add_patients_top layui-form">
		<div class="xl_left add_patients_top_c">
		<div class="xl_border">
			<div class="xl_border_head">
				<span class="xl_left">患者信息</span><span class="xl_right">重点患者</span>
			</div>
			<div class="xl_border_content" style="min-height: 444px;">
                <ul style="padding: 10px;">
                    <li>
                        <div class="layui-form-item lay_search">
                            <label class="layui-form-label">就&nbsp;&nbsp;诊&nbsp;号：</label>
                            <div class="layui-input-block">
                                <select name="caseId"  class="select2" lay-verify="caseId" lay-ignore lay-verify="required">
                                    <option value="">住院号，门诊号，急诊号，就诊号</option>
                                </select>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">姓　　名：</label>
                            <div class="layui-input-block">
                                <input type="text" name="name" placeholder="请输入姓名" lay-verify="required" maxlength="10" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">手机号码：</label>
                            <div class="layui-input-block">
                                <input type="text" name="phone" placeholder="请输入手机号码" lay-verify="required|phone" maxlength="11" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">身份证号：</label>
                            <div class="layui-input-block">
                                <input type="text" name="identity" placeholder="请输入身份证" lay-verify="required|identity" maxlength="18" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">性　　别：</label>
                            <div class="layui-input-block">
                                <input type="radio" name="sex" value="1" title="男" lay-verify="required" checked>
                                <input type="radio" name="sex" value="2" title="女" lay-verify="required">
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">出生日期：</label>
                            <div class="layui-input-block">
                                <input type="text" id="birthday" name="birthday" placeholder="选择出生日期" lay-verify="required|date" maxlength="18" class="layui-input" readonly>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">身　　高：</label>
                            <div class="layui-input-block">
                                <input type="text" name="stature" placeholder="请输入身高(cm)" lay-verify="number" maxlength="5" class="layui-input">
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">病　　种：</label>
                            <div class="layui-input-block">
                                <input type="checkbox" name="disease" title="糖尿病" value="1" lay-skin="primary" lay-verify="required">
                                <input type="checkbox" name="disease" title="痛风病" value="2" lay-skin="primary" lay-verify="required">
                                <input type="checkbox" name="disease" title="高血压" value="3" lay-skin="primary" lay-verify="required">
                            </div>
                        </div>
                    </li>
                </ul>
			</div>
		</div>
		</div>
		<div class="xl_left add_patients_top_c">
			<div class="xl_border">
				<div class="xl_border_head">
					就诊信息
				</div>
				<div class="xl_border_content" style="min-height: 444px;">
                <ul style="padding: 10px;">
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">主诊医师：</label>
                            <div class="layui-input-block">
                                <select name="attending" class="select2" lay-verify="caseId" lay-ignore lay-url="/department/selectdoctorlist" lay-verify="required">
                                    <option value="">选择主诊医师</option>
                                </select>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">就诊日期：</label>
                            <div class="layui-input-block">
                                <input type="text" id="seeTime" name="seeTime"placeholder="选择就诊日期" class="layui-input" lay-verify="required|date" readonly>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">就诊方式：</label>
                            <div class="layui-input-block">
                                <input type="radio" name="mode" value="门诊" title="门诊" lay-filter="mode" lay-verify="required" checked>
                                <input type="radio" name="mode" value="住院" title="住院" lay-filter="mode" lay-verify="required">
                                <input type="radio" name="mode" value="会诊" title="会诊" lay-filter="mode" lay-verify="required">
                            </div>
                        </div>
                    </li>
                    <li class="inhospitalTime" style="display: none;">
                        <div class="layui-form-item">
                            <label class="layui-form-label">住院日期：</label>
                            <div class="layui-input-block">
                                <input type="text" id="inhospitalTime" name="inhospitalTime" class="layui-input" readonly>
                            </div>
                        </div>
                    </li>
                    <li class="outhospitalTime" style="display: none;">
                        <div class="layui-form-item">
                            <label class="layui-form-label">出院日期：</label>
                            <div class="layui-input-block">
                                <input type="text" id="outhospitalTime" name="outhospitalTime" class="layui-input" readonly>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">诊　　断：</label>
                            <div class="layui-input-block">
                                <input type="radio" name="diagnose" value="新发" title="新发" lay-verify="required" checked>
                                <input type="radio" name="diagnose" value="疑难" title="疑难" lay-verify="required">
                                <input type="radio" name="diagnose" value="常规" title="常规" lay-verify="required">
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">诊断备注：</label>
                            <div class="layui-input-block">
                                <textarea name="remark" placeholder="诊断备注" class="layui-textarea"></textarea>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="layui-form-item">
                            <label class="layui-form-label">计划复诊：</label>
                            <div class="layui-input-block">
                                <input type="text" id="returnseeTime" placeholder="选择计划复诊" name="returnseeTime" class="layui-input" readonly>
                            </div>
                        </div>
                    </li>
                </ul>
				</div>
			</div>
		</div>
	</div>
	<div class="add_patients_dm">
		<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
		  <ul class="layui-tab-title">
		    <li class="layui-this">挂号单</li>
		    <li>病历单</li>
		    <li>检测报告</li>
		    <li>检查报告</li>
		    <li>出院小结</li>
		  </ul>
		  <div class="layui-tab-content" style="height: 100px;">
		    <div class="layui-tab-item layui-show">内容不一样是要有，因为你可以监听tab事件（阅读下文档就是了）</div>
		    <div class="layui-tab-item">内容2</div>
		    <div class="layui-tab-item">内容3</div>
		    <div class="layui-tab-item">内容4</div>
		    <div class="layui-tab-item">内容5</div>
		  </div>
		</div>
		<div class="add_patients_dm_sb layui-form">
			<div class="xl_left">
				<input type="checkbox" name="like1[write]" lay-skin="primary" title="全选">
			</div>
			<div class="xl_right">
				<button class="layui-btn layui-btn-warm">上传</button>
	    		<button class="layui-btn layui-btn-danger">删除</button>
			</div>
	    </div>
	    <button class="layui-btn layui-btn-normal">保存</button>  <button class="layui-btn layui-btn-danger">取消</button>
	</div>
<script src="../js/jquery-3.3.1.min.js" charset="utf-8"></script>
<script src="../select2/js/select2.js" charset="utf-8"></script>
<script src="../select2/js/i18n/zh-CN.js" charset="utf-8"></script>
<script src="../js/layui/layui.js" charset="utf-8"></script>
<script type="text/javascript">
layui.use(['element','form'], function(){
  var $ = layui.jquery
  var form = layui.form
  ,element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块
  
        $('.select2').select2({
            width: '100%',
            tags: true,
            ajax: {
                url: '/department/getpatientlist',
                dataType: 'json',
                delay: 250,
                data: function (params) {
                    return {keyword: params.term};
                },
                processResults: function (data) {
                    var itemList = [];//当数据对象不是{id:0,text:'ANTS'}这种形式的时候，可以使用类似此方法创建新的数组对象
                    if(!data.patientList) {
                        return;
                    }
                    var arr = data.patientList
                    for(i in arr){
                        var item = arr[i];
                        itemList.push({id: item.caseId, text: item.caseId + '(' + item.name + ')', sex: item.sex, name: item.name, identity: item.identity, phone: item.phone, stature: item.stature, disease: item.disease})
                    }

                    return {results: itemList};
                },
                cache: true
            },
            escapeMarkup: function (markup) { return markup; },
            minimumInputLength: 1,
            language: 'zh-CN'
        });  
  
});
</script>
</body>
</html>